<div class="flex h-screen flex-col">
    <app-loader></app-loader>
    <app-message></app-message>

    <header *ngIf="user$ | async" class="bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white shadow-2xl border-b border-blue-700">
        <div class="flex items-center justify-between px-4 py-3">
            <!-- Botão Menu (Mobile/Desktop) -->
            <button 
                (click)="toggleSidebar()" 
                class="p-2 rounded-lg hover:bg-blue-700 transition-all duration-200">
                <i class="fa-solid fa-bars text-xl"></i>
            </button>
            
            <!-- Informações da Empresa (Centro) -->
            <div class="flex items-center gap-3 cursor-pointer hover:bg-blue-700/30 px-4 py-2 rounded-lg transition-all duration-200" 
                 (click)="navegarParaDashboard()">
              <!-- Logo da empresa (se disponível) -->
              <div class="flex items-center justify-center w-10 h-10 rounded-full" 
                   [class.bg-blue-500]="!logoEmpresa">
                <img 
                  *ngIf="logoEmpresa" 
                  [src]="logoEmpresa" 
                  [alt]="nomeEmpresa"
                  class="w-10 h-10 rounded-full object-cover border-2 border-blue-400 shadow-lg">
                <i *ngIf="!logoEmpresa" class="fa-solid fa-store text-white text-lg"></i>
              </div>
              
              <!-- Nome da empresa -->
              <div class="flex flex-col">
                <h1 class="text-lg font-bold tracking-wide">{{ nomeEmpresa }}</h1>
                <!-- Status da empresa (apenas se inativa) -->
                <div class="flex items-center gap-2">
                  <span 
                    *ngIf="empresaAtiva" 
                    class="text-xs text-green-300 font-medium flex items-center gap-1">
                    <i class="fa-solid fa-circle-check text-[10px]"></i>
                    Ativa
                  </span>
                  <span 
                    *ngIf="!empresaAtiva" 
                    class="text-xs text-red-300 font-medium flex items-center gap-1">
                    <i class="fa-solid fa-circle-exclamation text-[10px]"></i>
                    Inativa
                  </span>
                </div>
              </div>
            </div>

            <!-- Espaço vazio para manter simetria -->
            <div class="w-10"></div>
        </div>
    </header>
    <div class="flex flex-1 overflow-hidden">
        <app-sidebar *ngIf="(user$ | async) && !sidebarOpen"></app-sidebar>
        <main class="flex-1 overflow-y-auto" [class.md:p-4]="user$ | async" [class.p-2]="user$ | async">
            <router-outlet></router-outlet>
        </main>
    </div>
</div>